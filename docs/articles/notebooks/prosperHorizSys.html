<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>prosperHorizSys â€¢ rOpenserver</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/spacelab/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><meta property="og:title" content="prosperHorizSys">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">rOpenserver</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0.9013</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/prosper-hello_world.html">Prosper Hello World!</a>
    </li>
    <li>
      <a href="../../articles/gap-hello_world.html">GAP Hello World!</a>
    </li>
    <li>
      <a href="../../articles/mbal-hello_world.html">MBAL Hello World!</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Notebooks
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/notebooks/prosperHorizNodeSys.html">Calculate liquid rate when varying well length, vertical anisotropy and wellhead pressure</a>
    </li>
    <li>
      <a href="../../articles/notebooks/prosperHorizSys.html">Calculate liquid rate when varying well length and vertical anisotropy</a>
    </li>
    <li>
      <a href="../../articles/notebooks/mbalPredByOoip.html">Run prediction given an OOIP</a>
    </li>
    <li>
      <a href="../../articles/notebooks/prosperOilwellHtc.html">Calculate well variables at diiferent Heat Transfer Coefficients</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="../../reference/index.html">Functions and Classes</a>
</li>
<li>
  <a href="../../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://github.com/f0nzie/rOpenserver">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>prosperHorizSys</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/f0nzie/rOpenserver/blob/master/vignettes/notebooks/prosperHorizSys.Rmd"><code>vignettes/notebooks/prosperHorizSys.Rmd</code></a></small>
      <div class="hidden name"><code>prosperHorizSys.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="co"># prosperHorizSys.R</span></a>
<a class="sourceLine" id="cb1-2" title="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(rOpenserver)</a>
<a class="sourceLine" id="cb1-3" title="3"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(tidyr)</a>
<a class="sourceLine" id="cb1-4" title="4"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb1-5" title="5"></a>
<a class="sourceLine" id="cb1-6" title="6"><span class="co"># function to get the filename for the model</span></a>
<a class="sourceLine" id="cb1-7" title="7">get_model_filename &lt;-<span class="st"> </span><span class="cf">function</span>(model) {</a>
<a class="sourceLine" id="cb1-8" title="8">    models_dir &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"models"</span>, <span class="dt">package =</span> <span class="st">"rOpenserver"</span>)</a>
<a class="sourceLine" id="cb1-9" title="9">    model_file &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(models_dir, model)</a>
<a class="sourceLine" id="cb1-10" title="10">    <span class="cf">if</span> (<span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/files.html">file.exists</a></span>(model_file)) <span class="kw"><a href="https://rdrr.io/r/base/stop.html">stop</a></span>(<span class="st">"Model not found ..."</span>) <span class="cf">else</span></a>
<a class="sourceLine" id="cb1-11" title="11">        <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span>(model_file)</a>
<a class="sourceLine" id="cb1-12" title="12">}</a></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="co"># well lengths and vertical anisotropy vectors</span></a>
<a class="sourceLine" id="cb2-2" title="2">well_length &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="dv">500</span>, <span class="dt">by =</span> <span class="dv">500</span>, <span class="dt">length.out =</span> <span class="dv">17</span>)</a>
<a class="sourceLine" id="cb2-3" title="3">kv_kh &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0.001</span>, <span class="fl">0.005</span>, <span class="fl">0.01</span>, <span class="fl">0.1</span>, <span class="fl">1.0</span>)</a>
<a class="sourceLine" id="cb2-4" title="4">df &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(well_length)</a></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="co"># Initialize and start OpenServer</span></a>
<a class="sourceLine" id="cb3-2" title="2">pserver &lt;-<span class="st"> </span>OpenServer<span class="op">$</span><span class="kw">new</span>()</a>
<a class="sourceLine" id="cb3-3" title="3">cmd =<span class="st"> "PROSPER.START"</span></a>
<a class="sourceLine" id="cb3-4" title="4"><span class="kw"><a href="../../reference/DoCmd.html">DoCmd</a></span>(pserver, cmd)</a>
<a class="sourceLine" id="cb3-5" title="5"></a>
<a class="sourceLine" id="cb3-6" title="6"><span class="co"># open model</span></a>
<a class="sourceLine" id="cb3-7" title="7">model_file &lt;-<span class="st"> </span><span class="kw">get_model_filename</span>(<span class="dt">model =</span> <span class="st">"HORWELLDP.OUT"</span>)</a>
<a class="sourceLine" id="cb3-8" title="8">open_cmd &lt;-<span class="st"> "PROSPER.OPENFILE"</span></a>
<a class="sourceLine" id="cb3-9" title="9">open_cmd &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(open_cmd, <span class="st">"('"</span>, model_file, <span class="st">"')"</span>)</a>
<a class="sourceLine" id="cb3-10" title="10"><span class="kw"><a href="../../reference/DoCmd.html">DoCmd</a></span>(pserver, open_cmd)</a></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="co"># iterate through anisotropy values</span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="cf">for</span> (k <span class="cf">in</span> kv_kh) {</a>
<a class="sourceLine" id="cb4-3" title="3">    <span class="kw"><a href="../../reference/DoSet.html">DoSet</a></span>(pserver, <span class="st">"PROSPER.SIN.IPR.Single.Vans"</span>, k)</a>
<a class="sourceLine" id="cb4-4" title="4">    <span class="co"># iterate through all well length values of interest</span></a>
<a class="sourceLine" id="cb4-5" title="5">    i &lt;-<span class="st">  </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb4-6" title="6">    <span class="cf">for</span> (wlen <span class="cf">in</span> df[[<span class="st">"well_length"</span>]]) {</a>
<a class="sourceLine" id="cb4-7" title="7">        <span class="co"># set well length</span></a>
<a class="sourceLine" id="cb4-8" title="8">        <span class="kw"><a href="../../reference/DoSet.html">DoSet</a></span>(pserver, <span class="st">"PROSPER.SIN.IPR.Single.WellLen"</span>, wlen)</a>
<a class="sourceLine" id="cb4-9" title="9">        <span class="co"># set length in zone 1</span></a>
<a class="sourceLine" id="cb4-10" title="10">        <span class="kw"><a href="../../reference/DoSet.html">DoSet</a></span>(pserver, <span class="st">"PROSPER.SIN.IPR.Single.HorizdP[0].ZONLEN"</span>, wlen)</a>
<a class="sourceLine" id="cb4-11" title="11">        <span class="kw"><a href="../../reference/DoCmd.html">DoCmd</a></span>(pserver, <span class="st">"PROSPER.anl.SYS.CALC"</span>)    <span class="co"># do calculation</span></a>
<a class="sourceLine" id="cb4-12" title="12">        <span class="co"># store liquid rate result in dataframe for each anisotropy scenario</span></a>
<a class="sourceLine" id="cb4-13" title="13">        df[[<span class="kw"><a href="https://rdrr.io/r/base/character.html">as.character</a></span>(k)]][i] &lt;-</a>
<a class="sourceLine" id="cb4-14" title="14"><span class="st">            </span><span class="kw"><a href="https://rdrr.io/r/base/double.html">as.double</a></span>(<span class="kw"><a href="../../reference/DoGet.html">DoGet</a></span>(pserver, <span class="st">"PROSPER.OUT.SYS.RESULTS[0][0][0].SOL.LIQRATE"</span>))</a>
<a class="sourceLine" id="cb4-15" title="15">        i &lt;-<span class="st">  </span>i <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb4-16" title="16">    }</a>
<a class="sourceLine" id="cb4-17" title="17">}</a>
<a class="sourceLine" id="cb4-18" title="18"><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(df)</a></code></pre></div>
<pre><code>   well_length     0.001     0.005      0.01       0.1        1
1          500  5122.723  6654.130  7376.862  9225.225 10074.80
2         1000  6502.892  8158.698  8763.273 10010.193 10500.44
3         1500  7442.298  8947.091  9422.393 10368.828 10711.88
4         2000  8081.572  9416.705  9815.624 10576.695 10838.98
5         2500  8565.691  9734.755 10077.367 10710.160 10924.37
6         3000  8909.852  9963.207 10263.006 10803.312 10984.46
7         3500  9177.887 10134.045 10400.360 10870.907 11027.95
8         4000  9391.362 10265.520 10505.026 10921.186 11059.91
9         4500  9564.346 10368.811 10585.193 10959.103 11083.47
10        5000  9706.521 10451.304 10647.387 10987.987 11100.84
11        5500  9824.676 10517.964 10696.969 11009.371 11112.55
12        6000  9923.822 10571.524 10736.874 11025.970 11121.27
13        6500 10007.648 10614.573 10768.802 11038.446 11124.79
14        7000 10079.021 10650.133 10794.942 11044.998 11127.86
15        7500 10140.119 10679.603 10813.414 11051.086 11129.07
16        8000 10192.705 10701.022 10830.166 11055.076 11128.84
17        8500 10238.145 10720.846 10843.626 11057.347 11127.42</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="co"># convert dataframe to tidy dataset</span></a>
<a class="sourceLine" id="cb6-2" title="2">df_gather &lt;-<span class="st"> </span><span class="kw">gather</span>(df, kv_kh, liquid_rate, <span class="st">'0.001'</span><span class="op">:</span><span class="st">'1'</span>)</a>
<a class="sourceLine" id="cb6-3" title="3"></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="co"># plot</span></a>
<a class="sourceLine" id="cb6-5" title="5">g &lt;-<span class="st"> </span><span class="kw">ggplot</span>(df_gather, <span class="kw">aes</span>(<span class="dt">x =</span> well_length, <span class="dt">y =</span> liquid_rate, <span class="dt">color =</span> kv_kh)) <span class="op">+</span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="st">    </span><span class="kw">geom_line</span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="st">    </span><span class="kw">geom_point</span>()</a>
<a class="sourceLine" id="cb6-8" title="8"></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="kw"><a href="https://rdrr.io/r/base/print.html">print</a></span>(g)</a></code></pre></div>
<p><img src="prosperHorizSys_files/figure-html/tidy_plot-1.png" width="700" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="co"># shutdown Prosper</span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="kw"><a href="https://rdrr.io/r/base/Sys.sleep.html">Sys.sleep</a></span>(<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb7-3" title="3">command =<span class="st"> "PROSPER.SHUTDOWN"</span></a>
<a class="sourceLine" id="cb7-4" title="4">pserver<span class="op">$</span><span class="kw"><a href="../../reference/DoCmd.html">DoCmd</a></span>(command)</a>
<a class="sourceLine" id="cb7-5" title="5">pserver &lt;-<span class="st"> </span><span class="ot">NULL</span></a></code></pre></div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Alfonso R. Reyes.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
